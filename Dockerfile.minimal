FROM node:18-alpine

WORKDIR /app

# Debugging araçları ekle
RUN apk add --no-cache curl procps

# Minimal sunucu dosyasını kopyala
COPY src/server.js .

# Ortam değişkenlerini ayarla
ENV PORT=8080
ENV NODE_ENV=production

# PORT'u görünür hale getir
EXPOSE 8080

# Uygulamayı başlat
CMD ["node", "server.js"] 